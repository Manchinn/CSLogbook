---
alwaysApply: true
---

# CSLogbook - กฎการใช้งาน Copilot/AI Assistant

## แนวทางการโต้ตอบทั่วไป
- **ภาษาเริ่มต้น**: กรุณาใช้ภาษาไทยสำหรับทุกคำอธิบาย ข้อเสนอแนะ และการตอบกลับทุกครั้ง
- **คอมเมนต์ในโค้ด**: เมื่อสร้างโค้ดใหม่ กรุณาใส่คอมเมนต์เป็นภาษาไทย โดยเฉพาะในส่วนที่มีตรรกะซับซ้อน เพื่อให้ทีมพัฒนาคนไทยเข้าใจง่ายขึ้น
- **คำศัพท์เทคนิค**: ให้ใช้คำศัพท์เทคนิคที่เป็นภาษาไทยถ้ามี แต่หากคำภาษาอังกฤษเป็นที่นิยมและเข้าใจง่ายกว่า ให้ใช้ภาษาอังกฤษพร้อมอธิบายความหมายเป็นภาษาไทยสั้น ๆ
- **ความชัดเจนสำคัญกว่าความสั้น**: อธิบายให้ละเอียดและชัดเจนเป็นภาษาไทย แม้จะยาวก็ตาม หลีกเลี่ยงการใช้ประโยคภาษาอังกฤษที่สั้นเกินไปหรือไม่ชัดเจน

---

## ภาพรวมระบบ
CSLogbook คือระบบติดตามความก้าวหน้าของนักศึกษา โดยใช้ React (frontend) และ Node.js/Express (backend) พร้อมฐานข้อมูล MySQL ระบบนี้ออกแบบมาเพื่อให้นักศึกษา อาจารย์ที่ปรึกษา และแอดมิน สามารถบันทึกกิจกรรม ติดตามความคืบหน้า และจัดการเวิร์กโฟลว์ทางวิชาการ

## สถาปัตยกรรมและรูปแบบสำคัญ
- **Frontend** (`cslogbook/frontend/`):
  - ใช้ React แบบ functional component และ hooks (ห้ามใช้ class component)
  - ใช้ Ant Design v5.25.1 สำหรับ UI, React Router สำหรับการนำทาง, Axios สำหรับเรียก API, และ Context API สำหรับ state management
  - แยก component ตามโดเมน เช่น `components/admin/`, `components/student/`
  - custom hook และ utility function อยู่ใน `hooks/` และ `utils/`
  - การเชื่อมต่อ API อยู่ใน `services/`
  - ต้องออกแบบให้ responsive และรองรับ accessibility
- **Backend** (`cslogbook/backend/`):
  - Node.js + Express, ใช้ Sequelize ORM กับ MySQL
  - แยก controller, model, route, middleware, service ตามหน้าที่
  - background agent (เช่น eligibility check) อยู่ใน `agents/`
  - logging ใช้ Winston, log file อยู่ใน `logs/`
  - ส่งอีเมลผ่าน SendGrid, อัปโหลดไฟล์ด้วย Multer

## โครงสร้างโปรเจค
แอปพลิเคชันนี้แยก frontend และ backend อย่างชัดเจน

### โครงสร้างฝั่ง Backend
- **controllers/**: จัดการ endpoint ของ API แยกตามโดเมน
- **models/**: โมเดลของฐานข้อมูล (Sequelize)
- **routes/**: กำหนดเส้นทางของ API
- **middleware/**: มิดเดิลแวร์ เช่น auth, rate limit ฯลฯ
- **config/**: ไฟล์ตั้งค่าต่าง ๆ เช่น ฐานข้อมูล, เซิร์ฟเวอร์
- **services/**: ธุรกิจลอจิกและการเชื่อมต่อกับบริการภายนอก
- **utils/**: ฟังก์ชันช่วยเหลือต่าง ๆ
- **migrations/**: ไฟล์เปลี่ยนแปลงโครงสร้างฐานข้อมูล
- **seeders/**: ข้อมูลตั้งต้นสำหรับฐานข้อมูล
- **agents/**: งานเบื้องหลังและ scheduled tasks

### โครงสร้างฝั่ง Frontend
- **src/components/**: คอมโพเนนต์ UI ที่นำกลับมาใช้ซ้ำได้
- **src/pages/**: คอมโพเนนต์ระดับหน้า (มี routing)
- **src/context/**: React context สำหรับ state management
- **src/hooks/**: custom React hooks
- **src/utils/**: ฟังก์ชันช่วยเหลือฝั่ง frontend
- **src/services/**: การเชื่อมต่อ API
- **src/assets/**: ไฟล์ภาพ ไอคอน ฯลฯ

## เวิร์กโฟลว์สำหรับนักพัฒนา
- **Setup**: ดูรายละเอียดไฟล์ `README.md` ของแต่ละส่วนสำหรับ environment variable และขั้นตอนติดตั้ง
- **Backend**:
  - ติดตั้ง: `cd cslogbook/backend && npm install`
  - รัน (dev): `npm run dev`
  - ตั้งค่า environment: copy `.env.example` ไป `.env.development` แล้วแก้ไข
- **Frontend**:
  - ติดตั้ง: `cd cslogbook/frontend && npm install`
  - รัน (dev): `npm start`
  - ทดสอบ: `npm test`
  - build: `npm run build`
- **Database**:
  - ต้องตั้งค่า MySQL ตาม `README.md` ที่ root
  - migration ของ Sequelize อยู่ที่ `backend/migrations/`

## รูปแบบเฉพาะของโปรเจกต์
- **React**: ใช้เฉพาะ functional component และ hook เท่านั้น, logic เฉพาะโดเมนให้อยู่ใน context หรือ custom hook, คอมเมนต์และอธิบายเป็นภาษาไทย
- **Backend**: ใช้ async/await, แยก logic หลักไว้ใน service, controller ให้บาง, ใช้ middleware สำหรับ auth/validation
- **API**: RESTful endpoint, version ภายใต้ `/api/`
- **Logging**: ใช้ Winston, log file อยู่ใน `logs/`
- **PDF/Report Generation**: ดูตัวอย่างที่ `frontend/src/components/internship/` และไฟล์ `.github/instructions/react-pdf-generation.instructions.md`

## ข้อควรจำเมื่อแนะนำโค้ด
- ระบบนี้เป็นระบบติดตามความก้าวหน้านักศึกษา เขียนด้วย React JavaScript
- ให้ใช้แนวทาง React สมัยใหม่ (ฟังก์ชันคอมโพเนนต์ + hooks)
- ผู้ใช้หลักคือ นักศึกษาและอาจารย์
- UI ต้อง responsive และเข้าถึงง่าย (accessible)
- ระบบต้องจัดการกิจกรรม, หมุดหมาย (milestone), และ feedback ของนักศึกษา

## แนวปฏิบัติที่ดีสำหรับ React Component
- ใช้สถาปัตยกรรมแบบโมดูลาร์และหลัก single responsibility
- แยกคอมโพเนนต์ให้เล็กและโฟกัสกับหน้าที่เดียว
- จัดการ state ด้วย React hooks (useState, useEffect, useContext, useReducer)
- แยก business logic ออกจาก presentational component
- มี error boundary และ fallback UI ที่เหมาะสม
- ใช้ React.memo() เพื่อเพิ่มประสิทธิภาพเมื่อเหมาะสม
- ปฏิบัติตาม accessibility (ARIA, semantic HTML, รองรับคีย์บอร์ด)
- เขียน utility function และ custom hook ที่นำกลับมาใช้ซ้ำได้
- มี error handling และ loading state ที่เหมาะสม
- ออกแบบให้รองรับทั้งมือถือและเดสก์ท็อป (responsive)
- ใช้ props destructuring และ default props เพื่อความสะอาดของโค้ด
- ตรวจสอบและ validate ฟอร์มอย่างเหมาะสม (custom hook หรือไลบรารี)
- อธิบายเป็นภาษาไทยเสมอถ้าเป็นไปได้

## ฟีเจอร์หลักของระบบ

### 1. ระบบยืนยันตัวตนและจัดการบทบาทผู้ใช้
- **ระบบล็อกอิน/สมัครสมาชิก**: ยืนยันตัวตนอย่างปลอดภัยสำหรับนักศึกษาและอาจารย์
- **Role-Based Access Control**: กำหนดสิทธิ์และมุมมองตามบทบาท (นักศึกษา, อาจารย์, แอดมิน)
- **จัดการโปรไฟล์**: ผู้ใช้สามารถแก้ไขข้อมูลส่วนตัว
- **กู้คืนบัญชี**: ระบบรีเซ็ตรหัสผ่านและกู้คืนบัญชี

### 2. ระบบติดตามและบันทึกความก้าวหน้า
- **บันทึกกิจกรรม**: นักศึกษาสามารถบันทึกงานที่ทำ, ปัญหา, และความสำเร็จ
- **จัดการหมุดหมาย (Milestone)**: กำหนดและติดตามหมุดหมายสำคัญ
- **จัดการงาน (Task)**: สร้างและจัดการงานพร้อมกำหนดเส้นตาย
- **แสดงสถานะความก้าวหน้า**: มีตัวชี้วัดความคืบหน้า
- **บันทึกสะท้อนความคิด (Journal)**: นักศึกษาสามารถเขียน reflection

### 3. แสดงผลกิจกรรมแบบ Timeline
- **มุมมองตามลำดับเวลา**: แสดงกิจกรรมและหมุดหมายแบบ timeline
- **ตัวกรอง**: กรอง timeline ตามช่วงเวลา, ประเภทกิจกรรม, หรือสถานะ
- **Timeline แบบ interactive**: คลิกเพื่อดูรายละเอียดแต่ละกิจกรรม
- **เชื่อมต่อปฏิทิน**: ดู deadline และหมุดหมายในรูปแบบปฏิทิน
- **วิเคราะห์ย้อนหลัง**: ติดตามรูปแบบความก้าวหน้าตามเทอม

### 4. เครื่องมือ feedback และประเมินผล
- **คอมเมนต์จากอาจารย์**: อาจารย์ให้ feedback ในแต่ละกิจกรรม
- **ระบบให้คะแนน**: ประเมินความก้าวหน้าตามเกณฑ์
- **กระทู้สนทนา**: พูดคุยเกี่ยวกับกิจกรรมหรือหมุดหมาย
- **ระบบอนุมัติ**: อาจารย์ตรวจสอบและอนุมัติงาน
- **ข้อเสนอแนะเพื่อพัฒนา**: ระบบแนะนำการปรับปรุง

### 5. รายงานและการแสดงผลข้อมูล
- **แดชบอร์ดความก้าวหน้า**: สรุปความคืบหน้าของนักศึกษา
- **วิเคราะห์เปรียบเทียบ**: เปรียบเทียบกับเป้าหมายหรือผลงานที่ผ่านมา
- **ส่งออกข้อมูล**: สร้างรายงาน PDF หรือ spreadsheet
- **วิเคราะห์ข้อมูล**: ค้นหารูปแบบ จุดแข็ง และจุดที่ควรปรับปรุง
- **ติดตามความสำเร็จ**: เน้นหมุดหมายและความสำเร็จที่ทำได้

## ข้อกำหนดทางเทคนิค
- ใช้ RESTful API สำหรับการเชื่อมต่อข้อมูล
- ออกแบบ UI ให้ responsive ทุกขนาดหน้าจอ
- ตรวจสอบและจัดการข้อผิดพลาดในฟอร์ม
- จัดการ state ด้วย React Context และ hooks
- จัดการข้อมูลอย่างปลอดภัยและคำนึงถึงความเป็นส่วนตัว

## จุดเชื่อมต่อสำคัญ
- **Frontend/Backend**: สื่อสารผ่าน REST API, URL กำหนดในไฟล์ `.env`
- **Email**: ใช้ SendGrid, เปิด/ปิดฟีเจอร์ผ่าน environment variable
- **File Uploads**: จัดการด้วย Multer, ไฟล์เก็บใน `uploads/`
- **Background Agents**: งานเบื้องหลังหรือ scheduler อยู่ใน `backend/agents/`

## ตัวอย่างการขยายระบบ
- หากต้องการเพิ่มประเภทกิจกรรมนักศึกษาใหม่ ให้แก้ไข model/controller ฝั่ง backend, เพิ่ม API route, และอัปเดตฟอร์มหรือ component ฝั่ง frontend
- การ export PDF ให้ดูตัวอย่างที่ `frontend/src/components/internship/` และ `.github/instructions/react-pdf-generation.instructions.md`

## แหล่งอ้างอิง
- ดู `README.md` ที่ root, backend, frontend สำหรับโครงสร้างและขั้นตอน
- ดู `.github/instructions/` สำหรับกฎการเขียนโค้ดเฉพาะโดเมน

---

## ข้อควรหลีกเลี่ยง
- หลีกเลี่ยงการใช้ class component (ให้ใช้ฟังก์ชันคอมโพเนนต์เท่านั้น)
- หลีกเลี่ยงแนวทาง React ที่ล้าสมัย
- หลีกเลี่ยงโค้ดที่ซับซ้อนเกินความจำเป็น
- อย่าคาดเดาว่ามีไลบรารีภายนอกนอกจากที่ระบุไว้
