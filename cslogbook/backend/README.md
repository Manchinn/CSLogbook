# CS Logbook Backend

‡∏£‡∏∞‡∏ö‡∏ö Backend API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô CS Logbook  
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Node.js + Express.js ‡πÅ‡∏•‡∏∞ Sequelize ORM

## üìã ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

Backend API server ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ RESTful API ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÉ‡∏ä‡πâ MySQL 8.0 ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö real-time ‡∏ú‡πà‡∏≤‡∏ô Socket.io

## üöÄ ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### Prerequisites
- Node.js >= 18.x
- MySQL 8.0
- npm ‡∏´‡∏£‡∏∑‡∏≠ yarn

### 1. Clone Repository
```bash
git clone <repository-url>
cd cslogbook/backend
```

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies
```bash
npm install
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables
```bash
npm run setup  # ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ copy .env.example ‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô .env.development
```

‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.development` ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

## Environment Variables

### Required Variables
- `NODE_ENV`: development | production
- `PORT`: port ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ô server (default: 5000)
- `BASE_URL`: URL ‡∏Ç‡∏≠‡∏á backend server
- `FRONTEND_URL`: URL ‡∏Ç‡∏≠‡∏á frontend application

### Database Configuration
- `DB_HOST`: hostname ‡∏Ç‡∏≠‡∏á database
- `DB_USER`: username ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ database
- `DB_PASSWORD`: password ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ database
- `DB_NAME`: ‡∏ä‡∏∑‡πà‡∏≠ database

### JWT Configuration
- `JWT_SECRET`: secret key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö JWT (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)
- `JWT_EXPIRES_IN`: ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏≠‡∏á token (default: 1d)

### Email Configuration
- `SENDGRID_API_KEY`: API key ‡∏Ç‡∏≠‡∏á SendGrid
- `EMAIL_SENDER`: ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏á

### Feature Flags
- `EMAIL_LOGIN_ENABLED`: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ï‡∏≠‡∏ô login
- `EMAIL_DOCUMENT_ENABLED`: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
- `EMAIL_LOGBOOK_ENABLED`: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö logbook
- `EMAIL_MEETING_ENABLED`: ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå
- `LOG_ENABLE_CONSOLE`: ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô `false` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á log ‡πÉ‡∏ô console (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™‡∏ï‡πå ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î development)

### Upload Configuration
- `UPLOAD_DIR`: directory ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î (default: uploads/)
- `MAX_FILE_SIZE`: ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ bytes (default: 5MB)

## üíª ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô

### Development Mode
```bash
npm run dev
```
Server ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:5000` (‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏° PORT ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î)

### Production Mode
```bash
npm run build
npm start
```

### Database Setup
```bash
# ‡∏£‡∏±‡∏ô migrations
npm run migrate

# ‡∏£‡∏±‡∏ô seeders (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)
npm run seed

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡∏∞ models
npm run db:check:all
```

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

```
backend/
‚îú‚îÄ‚îÄ controllers/          # Request handlers
‚îÇ   ‚îú‚îÄ‚îÄ documents/        # Document controllers
‚îÇ   ‚îî‚îÄ‚îÄ logbooks/        # Logbook controllers
‚îÇ
‚îú‚îÄ‚îÄ services/            # Business logic layer
‚îÇ   ‚îú‚îÄ‚îÄ internshipService.js
‚îÇ   ‚îú‚îÄ‚îÄ projectService.js
‚îÇ   ‚îú‚îÄ‚îÄ workflowService.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ models/              # Sequelize models
‚îÇ   ‚îú‚îÄ‚îÄ User.js
‚îÇ   ‚îú‚îÄ‚îÄ Student.js
‚îÇ   ‚îú‚îÄ‚îÄ ProjectDocument.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ routes/              # API routes
‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ adminRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ studentRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ teacherRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ projectRoutes.js
‚îÇ   ‚îú‚îÄ‚îÄ documents/       # Document routes
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ middleware/          # Express middleware
‚îÇ   ‚îú‚îÄ‚îÄ authMiddleware.js
‚îÇ   ‚îú‚îÄ‚îÄ rateLimiter.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ agents/              # Background agents
‚îÇ   ‚îú‚îÄ‚îÄ schedulers/      # Scheduled tasks
‚îÇ   ‚îú‚îÄ‚îÄ monitors/        # System monitors
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îÇ
‚îú‚îÄ‚îÄ migrations/          # Database migrations
‚îÇ   ‚îî‚îÄ‚îÄ YYYYMMDDHHMMSS-description.js
‚îÇ
‚îú‚îÄ‚îÄ seeders/             # Database seeders
‚îÇ   ‚îú‚îÄ‚îÄ dev/             # Development seeders
‚îÇ   ‚îî‚îÄ‚îÄ production/       # Production seeders
‚îÇ
‚îú‚îÄ‚îÄ scripts/             # Utility scripts
‚îÇ   ‚îú‚îÄ‚îÄ setupDeadlineMappings.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ utils/               # Utility functions
‚îÇ   ‚îú‚îÄ‚îÄ validateEnv.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ config/              # Configuration files
‚îÇ   ‚îú‚îÄ‚îÄ database.js
‚îÇ   ‚îú‚îÄ‚îÄ jwt.js
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ templates/           # Email templates
‚îÇ   ‚îî‚îÄ‚îÄ *.html
‚îÇ
‚îú‚îÄ‚îÄ uploads/             # Uploaded files
‚îú‚îÄ‚îÄ logs/                # Application logs
‚îú‚îÄ‚îÄ app.js               # Express app configuration
‚îî‚îÄ‚îÄ server.js            # Server entry point
```

## API Documentation

‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Swagger UI ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:
```
http://localhost:5000/api-docs
```

### Topic Exam Overview (Summary)
Endpoint: `GET /api/projects/topic-exam/overview`

Readiness flags (response.readiness):
- `titleCompleted`: ‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢/‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©
- `advisorAssigned`: ‡∏°‡∏µ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤
- `proposalUploaded` / `abstractUploaded`: heuristic ‡∏à‡∏≤‡∏Å field `objective` / `expectedOutcome`
- `memberCountOk`: (‡πÉ‡∏´‡∏°‡πà) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å >= 2
- `readyFlag`: baseline = (titleCompleted && advisorAssigned) ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤‡∏Å‡∏™‡πà‡∏á query `enforceMemberMin=1` ‡∏à‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏£‡∏ß‡∏° `memberCountOk`

Query Params ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:
- `readyOnly=true` ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà readyFlag = true
- `enforceMemberMin=1` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ readyFlag ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å >=2

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å: `/api/projects/topic-exam/overview?readyOnly=true&enforceMemberMin=1`

### Scenario Seeding (‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏Ñ‡∏™)
‡πÑ‡∏ü‡∏•‡πå seeder:
1. `20250922120000-demo-topic-exam-projects.js` ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (1-2 ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å, readiness ‡∏õ‡∏Å‡∏ï‡∏¥)
2. `20250922123000-scenario-topic-exam-projects.js` ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏™‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢: draft/no advisor, missing EN title, single member, multi-member ‡∏û‡∏£‡πâ‡∏≠‡∏° track, in_progress, completed, archived

‡∏£‡∏±‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ scenario:
```bash
npx sequelize-cli db:seed --seed 20250922123000-scenario-topic-exam-projects.js
```
Rollback:
```bash
npx sequelize-cli db:seed:undo --seed 20250922123000-scenario-topic-exam-projects.js
```

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß:
```sql
SELECT project_id, project_name_th, status, advisor_id FROM project_documents 
WHERE project_name_th LIKE 'SCENARIO TOPIC%';
```

### Project Meetings & Logbook Approval
API ‡∏ä‡∏∏‡∏î‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏û‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ logbook

- `GET /api/projects/:projectId/meetings` ‚Äî ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ meeting ‡∏û‡∏£‡πâ‡∏≠‡∏° logs, ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏° ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô
- `POST /api/projects/:projectId/meetings` ‚Äî ‡∏™‡∏£‡πâ‡∏≤‡∏á meeting ‡πÉ‡∏´‡∏°‡πà (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô `additionalParticipantIds`)
- `POST /api/projects/:projectId/meetings/:meetingId/logs` ‚Äî ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏û‡∏ö (log) ‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤, ‡∏õ‡∏±‡∏ç‡∏´‡∏≤, ‡∏á‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÅ‡∏•‡∏∞ action items
- `PATCH /api/projects/:projectId/meetings/:meetingId/logs/:logId/approval` ‚Äî ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤/‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥, ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å comment ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
- `POST /api/projects/:projectId/meetings/request-approval` ‚Äî ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≠‡∏ö‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á log ‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‚Äú‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏ö‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‚Äù ‡πÇ‡∏î‡∏¢ summary ‡πÉ‡∏ô response ‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô


## ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment Variables

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env.development ‡∏à‡∏≤‡∏Å template:
```bash
cp .env.example .env.development
```

2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô .env.development ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô server:
```bash
# ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á
NODE_ENV=development
PORT=5000
BASE_URL=http://localhost:5000
API_PREFIX=/api
FRONTEND_URL=http://localhost:3000

# Database
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=cslogbook

# JWT
JWT_SECRET=your-secret-key-at-least-32-chars
JWT_EXPIRES_IN=1d

# Email
SENDGRID_API_KEY=your_sendgrid_api_key
EMAIL_SENDER=your_email@example.com

# Feature Flags
EMAIL_LOGIN_ENABLED=false
EMAIL_DOCUMENT_ENABLED=false
EMAIL_LOGBOOK_ENABLED=false

# Upload
UPLOAD_DIR=uploads/
MAX_FILE_SIZE=5242880
```

## ‡∏Å‡∏≤‡∏£ Validate Environment Variables

Server ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤ environment variables ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö format ‡∏Ç‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á URLs
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á JWT_SECRET

‡∏´‡∏≤‡∏Å‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î server ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

## üõ†Ô∏è Database Management

### Migrations
```bash
# ‡∏£‡∏±‡∏ô migrations ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
npm run migrate

# Rollback migration ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
npm run migrate:undo

# ‡∏™‡∏£‡πâ‡∏≤‡∏á migration ‡πÉ‡∏´‡∏°‡πà
npm run migrate:create <migration-name>

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ migrations
npm run migrate:status
```

### Seeders
```bash
# ‡∏£‡∏±‡∏ô seeders ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
npm run seed

# ‡∏£‡∏±‡∏ô seeder ‡πÄ‡∏â‡∏û‡∏≤‡∏∞
npm run seed:one <seeder-name>

# Rollback seeder
npm run seed:undo:one <seeder-name>

# Development seeders
npm run seed:dev

# Production seeders
npm run seed:prod
```

### Database Checks
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ database
npm run db:check

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö models
npm run db:check:models

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
npm run db:check:all
```

## ü§ñ Background Agents

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ Background Agents ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤:

### Schedulers
- **deadlineReminderAgent**: ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô deadlines
- **eligibilityScheduler**: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
- **academicSemesterScheduler**: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏†‡∏≤‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **projectPurgeScheduler**: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

### Monitors
- **documentStatusMonitor**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
- **logbookQualityMonitor**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û logbook
- **securityMonitor**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Agents
‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variable:
```bash
ENABLE_AGENTS=true
# ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞ agent
ACADEMIC_AUTO_UPDATE_ENABLED=true
```

## üìú Utility Scripts

### Important Deadlines Management
```bash
# ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ deadlines ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
node scripts/setupDeadlineMappings.js list-deadlines

# ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ mappings ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
node scripts/setupDeadlineMappings.js list-mappings

# ‡∏™‡∏£‡πâ‡∏≤‡∏á mappings ‡πÉ‡∏´‡∏°‡πà (‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç config ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏Å‡πà‡∏≠‡∏ô)
node scripts/setupDeadlineMappings.js setup

# Backfill ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤
node scripts/backfillDocumentDeadlines.js
```

**‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô**:
- `../knowledge/DEADLINE_LINKING_SUMMARY.md` - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- `../knowledge/DEADLINE_DOCUMENT_LINKING_GUIDE.md` - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
- `../knowledge/deadlines_system_spec.md` - ‡∏™‡πÄ‡∏õ‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏â‡∏ö‡∏±‡∏ö‡πÄ‡∏ï‡πá‡∏°

## üê≥ Docker Deployment

### Development
```bash
docker-compose up -d backend
```

### Production
```bash
# Build image
docker-compose -f docker-compose.production.yml build backend

# Start container
docker-compose -f docker-compose.production.yml up -d backend

# View logs
docker-compose -f docker-compose.production.yml logs -f backend
```

## üì¶ Tech Stack

### Core
- **Node.js**: >= 18.x
- **Express.js**: 4.21.1
- **Sequelize**: 6.37.6 (ORM)

### Database
- **MySQL**: 8.0
- **mysql2**: 3.13.0

### Authentication & Security
- **jsonwebtoken**: 9.0.2 (JWT)
- **bcrypt**: 5.1.1 (Password hashing)
- **express-rate-limit**: 7.5.0 (Rate limiting)
- **express-validator**: 7.2.1 (Input validation)

### Email
- **nodemailer**: 6.9.16
- **SendGrid**: (via API)

### Real-time
- **socket.io**: 4.8.0

### File Processing
- **multer**: 1.4.5-lts.1 (File upload)
- **pdfkit**: 0.17.1 (PDF generation)
- **exceljs**: 4.4.0 (Excel processing)
- **xlsx**: 0.18.5 (Excel parsing)

### Scheduling
- **node-cron**: 3.0.3
- **node-schedule**: 2.1.1

### Documentation
- **swagger-jsdoc**: 6.2.8
- **swagger-ui-express**: 5.0.1

### Utilities
- **dayjs**: 1.11.13 (Date manipulation)
- **moment-timezone**: 0.5.47 (Timezone handling)
- **joi**: 17.13.3 (Schema validation)
- **winston**: 3.17.0 (Logging)

## üß™ Testing

```bash
# Run tests
npm run test

# Run tests with coverage
npm run test:cov
```

## üîç Troubleshooting

### Database Connection Issues
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö database credentials ‡πÉ‡∏ô `.env.development`
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ MySQL service ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö port ‡πÅ‡∏•‡∏∞ host

### JWT Errors
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `JWT_SECRET` ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß >= 32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö token expiration

### File Upload Issues
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `UPLOAD_DIR` permissions
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `MAX_FILE_SIZE` setting
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö disk space

### Agent Not Running
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `ENABLE_AGENTS=true` ‡πÉ‡∏ô environment variables
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡πÉ‡∏ô `logs/` directory
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ agents ‡∏ñ‡∏π‡∏Å start ‡πÉ‡∏ô `server.js`

## üìù Important Notes

- ‚ö†Ô∏è **‡∏´‡πâ‡∏≤‡∏° commit ‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏´‡∏£‡∏∑‡∏≠ `.env.development`**
- ‚úÖ ‡πÉ‡∏ä‡πâ `.env.example` ‡πÄ‡∏õ‡πá‡∏ô template
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö environment variables ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô server
- ‚úÖ ‡πÉ‡∏ä‡πâ migrations ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á database schema
- ‚úÖ ‡πÉ‡∏ä‡πâ seeders ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤
